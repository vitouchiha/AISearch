<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/webp" href="{{ROOT_URL}}/images/logo.webp" />
  <title>FilmWhisper: AISearch Configure</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .animate-bounce-slow {
      animation: bounce 6s infinite ease-in-out;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-20px);
      }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white min-h-screen flex flex-col items-center justify-center p-4 sm:p-6 overflow-auto">
  <!-- Background Effects -->
  <div class="absolute inset-0 z-0 pointer-events-none">
    <div class="animate-pulse bg-white bg-opacity-10 rounded-full w-32 h-32 absolute top-1/4 left-1/4 blur-3xl"></div>
    <div class="animate-bounce-slow bg-white bg-opacity-10 rounded-full w-24 h-24 absolute bottom-1/4 right-1/4 blur-3xl"></div>
    <svg class="w-full h-full opacity-20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
      <path fill="currentColor" fill-opacity="0.1"
        d="M0,192L48,176C96,160,192,128,288,138.7C384,149,480,203,576,202.7C672,203,768,149,864,144C960,139,1056,181,1152,186.7C1248,192,1344,160,1392,144L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z" />
    </svg>
  </div>

  <main class="relative z-10 flex flex-col items-center w-full max-w-2xl space-y-6 sm:space-y-10">
    <!-- Header -->
    <header class="flex flex-col items-center text-center">
      <h1 class="text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400">
        FilmWhisper: AISearch
      </h1>
      <p class="mt-2 text-sm text-gray-400">AI-powered movie discovery for Stremio</p>
    </header>

    <!-- Provider Selection Section -->
    <section class="w-full bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl p-4 sm:p-6">
      <h2 class="text-xl sm:text-2xl font-bold text-center text-cyan-400">
        Select AI Provider
      </h2>
      <div class="flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-4 my-4">
        <button type="button" data-provider="openai"
          class="provider-btn w-full sm:w-auto px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none flex items-center justify-center">
          <img src="/images/icons/OpenAI.svg" alt="OpenAI" class="w-8 h-8" />
          <span class="sr-only">OpenAI</span>
        </button>
        <button type="button" data-provider="google"
          class="provider-btn w-full sm:w-auto px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none flex items-center justify-center">
          <img src="/images/icons/Gemini.svg" alt="Google Gemini" class="w-8 h-8" />
          <span class="sr-only">Google Gemini</span>
        </button>
        <button type="button" data-provider="claude"
          class="provider-btn w-full sm:w-auto px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none flex items-center justify-center">
          <img src="/images/icons/Claude.svg" alt="Claude 3.5" class="w-8 h-8" />
          <span class="sr-only">Claude 3.5</span>
        </button>
        <button type="button" data-provider="deepseek"
          class="provider-btn w-full sm:w-auto px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded focus:outline-none flex items-center justify-center">
          <img src="/images/icons/DeepSeek.svg" alt="DeepSeek R1" class="w-8 h-8" />
          <span class="sr-only">DeepSeek R1</span>
        </button>
      </div>
      <p class="text-sm text-gray-300">
        DeepSeek is currently disabled due to API stability issues.
      </p>
      <p class="text-sm text-gray-300">
        If you are unable to update/install addon it's probably due to a rate limit. Try again in one hour.
      </p>
    </section>

    <!-- Provider Configuration Section -->
    <section class="w-full bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl p-4 sm:p-6 space-y-6">
      <!-- Google Gemini Configuration -->
      <div class="provider-config bg-gray-700/80 p-4 rounded-lg shadow-sm" data-provider-config="google">
        <p>
          <a href="https://aistudio.google.com/apikey" target="_blank" rel="noopener noreferrer"
            class="text-cyan-400 underline hover:text-cyan-300">
            Create Google API Key
          </a>
        </p>
        <label for="googleKey" class="block text-sm font-medium text-gray-300 mt-2">
          Google AI Key:
        </label>
        <input type="text" id="googleKey" name="googleKey" placeholder="Enter your Google AI key"
          class="w-full p-3 mt-1 border border-gray-600 rounded-lg bg-gray-800 text-gray-100 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition duration-300 text-sm sm:text-base" />
        <div class="flex items-center space-x-2 mt-2">
          <input id="defaultGoogleKey" name="defaultGoogleKey" type="checkbox"
            class="text-indigo-500 focus:ring-indigo-500 rounded transition duration-300" />
          <label for="defaultGoogleKey" class="text-sm text-gray-300">
            Use default Google key
          </label>
        </div>
      </div>

      <!-- OpenAI Configuration -->
      <div class="provider-config bg-gray-700/80 p-4 rounded-lg shadow-sm hidden" data-provider-config="openai">
        <p>
          <a href="https://platform.openai.com/settings/organization/api-keys" target="_blank" rel="noopener noreferrer"
            class="text-cyan-400 underline hover:text-cyan-300">
            Create OpenAI API Key
          </a>
        </p>
        <label for="openaiKey" class="block text-sm font-medium text-gray-300 mt-2">
          OpenAI API Key:
        </label>
        <input type="text" id="openaiKey" name="openaiKey" placeholder="Enter your OpenAI API key"
          class="w-full p-3 mt-1 border border-gray-600 rounded-lg bg-gray-800 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 text-sm sm:text-base" />
      </div>

      <!-- Claude Configuration -->
      <div class="provider-config bg-gray-700/80 p-4 rounded-lg shadow-sm hidden" data-provider-config="claude">
        <p>
          <a href="https://console.anthropic.com/settings/keys" target="_blank" rel="noopener noreferrer"
            class="text-cyan-400 underline hover:text-cyan-300">
            Create Claude API Key
          </a>
        </p>
        <label for="claudeKey" class="block text-sm font-medium text-gray-300 mt-2">
          Claude API Key:
        </label>
        <input type="text" id="claudeKey" name="claudeKey" placeholder="Enter your Claude API key"
          class="w-full p-3 mt-1 border border-gray-600 rounded-lg bg-gray-800 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 text-sm sm:text-base" />
      </div>

      <!-- Deepseek Configuration -->
      <div class="provider-config bg-gray-700/80 p-4 rounded-lg shadow-sm hidden" data-provider-config="deepseek">
        <p>
          <a href="https://platform.deepseek.com/api_keys" target="_blank" rel="noopener noreferrer"
            class="text-cyan-400 underline hover:text-cyan-300">
            Create DeepSeek API Key
          </a>
        </p>
        <label for="deepseekKey" class="block text-sm font-medium text-gray-300 mt-2">
          DeepSeek API Key:
        </label>
        <input type="text" id="deepseekKey" name="deepseekKey" placeholder="Enter your DeepSeek API key"
          class="w-full p-3 mt-1 border border-gray-600 rounded-lg bg-gray-800 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 text-sm sm:text-base" />
      </div>

      <!-- Additional Configuration Fields -->
      <div class="mt-6 space-y-6">
        <div class="bg-gray-700/80 border border-gray-600 text-gray-200 p-4 rounded-lg text-xs">
          <p>
            We use your API keys on your behalf for server-side operations; they are stored using AES256 encryption and are only used for your personal requests.
          </p>
        </div>
        <div class="space-y-2">
          <p>
            <a href="https://www.themoviedb.org/settings/api" target="_blank" rel="noopener noreferrer"
              class="text-cyan-400 underline hover:text-cyan-300">
              Create TMDB API Key
            </a>
          </p>
          <label for="tmdbKey" class="block text-sm font-medium text-gray-300">
            TMDB API Key:
          </label>
          <input type="text" id="tmdbKey" name="tmdbKey" placeholder="Enter your TMDB API key"
            class="w-full p-3 mt-1 border border-gray-600 rounded-lg bg-gray-800 text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 transition duration-300 text-sm sm:text-base" />
        </div>
        <div class="space-y-2">
          <p>
            <a href="https://ratingposterdb.com/api-key/" target="_blank" rel="noopener noreferrer"
              class="text-cyan-400 underline hover:text-cyan-300">
              Create Ratings Poster API Key
            </a>
          </p>
          <label for="rpdbKey" class="block text-sm font-medium text-gray-300">
            Ratings Poster API Key:
          </label>
          <input type="text" id="rpdbKey" name="rpdbKey" placeholder="Enter your Ratings Poster API key"
            class="w-full p-3 mt-1 border border-gray-600 rounded-lg bg-gray-800 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-300 text-sm sm:text-base" />
        </div>
        <div class="space-y-2">
          <div class="flex items-center justify-between">
            <label class="block text-sm font-medium text-gray-300">Trakt.tv Account</label>
            <span id="trakt-status" class="text-sm text-gray-400">Not connected</span>
          </div>
          <button id="trakt-auth-button"
            class="w-full bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-300">
            Connect Trakt.tv
          </button>
        </div>
        <div class="space-y-2">
          <div class="flex items-center space-x-2">
            <input id="defaultTmdbKey" name="defaultTmdbKey" type="checkbox"
              class="text-purple-500 focus:ring-purple-500 rounded transition duration-300" />
            <label for="defaultTmdbKey" class="text-sm text-gray-300">Use default TMDB key</label>
          </div>
          <div class="flex items-center space-x-2">
            <input id="optOutTrending" name="optOutTrending" type="checkbox"
              class="text-indigo-500 focus:ring-indigo-500 rounded transition duration-300" />
            <label for="optOutTrending" class="text-sm text-gray-300">Opt out of trending catalog</label>
          </div>
        </div>
        <!-- URL Display Box (shown only after storing keys) -->
        <div id="url-display-box" class="hidden bg-gray-700/80 rounded-lg p-4 text-gray-100 break-words shadow-lg">
          <p class="text-xs mb-2">Copy and paste this URL to install via Stremio:</p>
          <code id="url-display" class="block bg-gray-800/80 p-2 rounded text-xs text-gray-200"></code>
        </div>
        <div class="space-y-2">
          <button id="install-button"
            class="w-full bg-gradient-to-r from-indigo-500 to-cyan-500 hover:from-indigo-600 hover:to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
            disabled>
            Install Addon
          </button>
          <button id="update-keys-button"
            class="w-full bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-300">
            Update Keys
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="relative z-10 w-full max-w-2xl mt-6 sm:mt-10 space-y-6">
    <div class="text-center">
      <a href="https://github.com/mkcfdc/AISearch" target="_blank" rel="noopener noreferrer"
        class="inline-flex items-center text-blue-400 hover:text-blue-300 transition duration-300 py-3 px-4">
        <svg class="w-5 h-5 mr-2" role="img" viewBox="0 0 24 24" fill="currentColor"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 0C5.373 0 0 5.373 0 12c0 5.302 3.438 9.8 8.205 11.387.6.111.82-.261.82-.577 0-.285-.011-1.04-.017-2.04-3.338.724-4.042-1.612-4.042-1.612-.546-1.387-1.333-1.757-1.333-1.757-1.089-.745.083-.729.083-.729 1.205.084 1.84 1.236 1.84 1.236 1.07 1.835 2.809 1.304 3.495.997.108-.776.42-1.305.763-1.605-2.665-.3-5.466-1.335-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.957-.266 1.98-.399 3-.405 1.02.006 2.043.139 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.435.375.81 1.11.81 2.235 0 1.61-.015 2.91-.015 3.31 0 .315.21.694.825.576C20.565 21.092 24 16.592 24 12c0-6.627-5.373-12-12-12" />
        </svg>
        View this project on GitHub
      </a>
    </div>
    <div class="text-xs text-gray-500 text-center">
      v{{VERSION}} {{DEV_MODE}}
    </div>
    <section class="w-full bg-gray-800/90 backdrop-blur-md rounded-2xl shadow-2xl p-4 sm:p-6 space-y-4">
      <h3 class="text-lg font-semibold text-gray-300">Statistics</h3>
      <div class="space-y-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mr-2 text-green-400" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
            <span class="text-sm text-gray-400">Total Installs</span>
          </div>
          <p class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-400">
            {{INSTALLS}}
          </p>
        </div>
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mr-2 text-purple-400" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7a2 2 0 012-2h12a2 2 0 012 2m-2 2H6a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-2" />
            </svg>
            <span class="text-sm text-gray-400">Database Keys</span>
          </div>
          <p class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500">
            {{DB_SIZE}}
          </p>
        </div>
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 mr-2 text-yellow-400" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M20 12l-8 5-8-5 8-5 8 5z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7v10" />
            </svg>
            <span class="text-sm text-gray-400">Vector Count</span>
          </div>
          <p class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500">
            {{VECTOR_COUNT}}
          </p>
        </div>
      </div>
    </section>
  </footer>

  <script src="/configure.js"></script>
</body>

</html>